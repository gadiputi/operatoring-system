#include <stdio.h>
#include <stdlib.h>

struct Employee {
    int id;
    char name[20];
    float salary;
};

int main() {
    FILE *fp;
    struct Employee e;
    int choice, id;

    fp = fopen("employee.dat","rb+");
    if(!fp) fp = fopen("employee.dat","wb+");

    while(1) {
        printf("\n1.Add Employee\n2.Display All\n3.Search by ID\n4.Exit\nChoice: ");
        scanf("%d",&choice);
        switch(choice) {
            case 1:
                printf("Enter ID Name Salary: ");
                scanf("%d %s %f",&e.id,e.name,&e.salary);
                fseek(fp, (e.id-1)*sizeof(e), SEEK_SET);
                fwrite(&e,sizeof(e),1,fp);
                break;
            case 2:
                rewind(fp);
                while(fread(&e,sizeof(e),1,fp))
                    printf("%d %s %.2f\n",e.id,e.name,e.salary);
                break;
            case 3:
                printf("Enter ID: "); scanf("%d",&id);
                fseek(fp,(id-1)*sizeof(e),SEEK_SET);
                if(fread(&e,sizeof(e),1,fp))
                    printf("Found: %d %s %.2f\n",e.id,e.name,e.salary);
                else printf("Not Found\n");
                break;
            case 4: fclose(fp); exit(0);
        }
    }
}
